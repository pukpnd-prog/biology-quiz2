<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Biology Spaced Repetition</title>
    <style>
        body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; background: #f0f2f5; display: flex; justify-content: center; padding: 20px; }
        #quiz-card { background: white; width: 100%; max-width: 500px; padding: 30px; border-radius: 15px; box-shadow: 0 10px 25px rgba(0,0,0,0.1); border-top: 8px solid #00a651; text-align: center; }
        .question-text { font-size: 1.2rem; font-weight: bold; color: #333; margin-bottom: 20px; min-height: 60px; }
        .btn { padding: 12px 25px; border: none; border-radius: 8px; font-weight: bold; cursor: pointer; transition: 0.2s; margin: 5px; }
        .btn-primary { background: #2196F3; color: white; width: 100%; }
        .btn-success { background: #4CAF50; color: white; flex: 1; }
        .btn-danger { background: #f44336; color: white; flex: 1; }
        #answer-area { display: none; margin-top: 20px; padding-top: 20px; border-top: 1px solid #eee; }
        .answer-text { background: #f9f9f9; padding: 15px; border-radius: 8px; color: #555; margin-bottom: 20px; }
        .button-group { display: flex; justify-content: space-between; }
        #status-bar { margin-top: 20px; font-size: 0.8rem; color: #888; }
    </style>
</head>
<body>

<div id="quiz-card">
    <div id="quiz-content">
        <div class="question-text" id="q-text">Loading your next review...</div>
        <button class="btn btn-primary" id="show-btn" onclick="showAnswer()">Show Answer</button>

        <div id="answer-area">
            <div class="answer-text" id="a-text"></div>
            <p>Did you know this?</p>
            <div class="button-group">
                <button class="btn btn-danger" onclick="submitResult(false)">Forgot</button>
                <button class="btn btn-success" onclick="submitResult(true)">Got it!</button>
            </div>
        </div>
    </div>
    <div id="status-bar"></div>
</div>

<script>
    // 1. DATA: Add your Biology questions here
    const questions = [
        { id: 'b1', q: "What is 'Movement' in living things?", a: "An action by an organism causing a change of position or place." },
        { id: 'b2', q: "Define 'Respiration'.", a: "Chemical reactions in cells that break down nutrient molecules to release energy." },
        { id: 'b3', q: "What is 'Sensitivity'?", a: "The ability to detect and respond to changes in the environment." },
        { id: 'b4', q: "Define 'Excretion'.", a: "Removal from organisms of toxic materials and substances in excess of requirements." },
        { id: 'b5', q: "What is 'Nutrition'?", a: "Taking in of materials for energy, growth, and development." }
    ];

    let currentCard = null;

    // 2. LOGIC: Find which card is due for review
    function getNextCard() {
        const progress = JSON.parse(localStorage.getItem('bio_prog')) || {};
        const now = Date.now();

        // Filter for cards that are new OR due now
        const dueCards = questions.filter(q => {
            if (!progress[q.id]) return true; // New card
            return progress[q.id].nextReview <= now; // Due card
        });

        if (dueCards.length === 0) {
            document.getElementById('quiz-content').innerHTML = "ðŸŽ‰ <h3>All caught up!</h3><p>Come back later for your next scheduled review.</p>";
            return;
        }

        currentCard = dueCards[0];
        document.getElementById('q-text').innerText = currentCard.q;
        document.getElementById('a-text').innerText = currentCard.a;
    }

    function showAnswer() {
        document.getElementById('answer-area').style.display = 'block';
        document.getElementById('show-btn').style.display = 'none';
    }

    function submitResult(isCorrect) {
        let progress = JSON.parse(localStorage.getItem('bio_prog')) || {};
        let p = progress[currentCard.id] || { level: 0 };

        if (isCorrect) {
            p.level = Math.min(p.level + 1, 5);
        } else {
            p.level = 1;
        }

        // Intervals: New, 1m, 10m, 1day, 5days, 30days
        const intervals = [0, 1, 10, 1440, 7200, 43200];
        p.nextReview = Date.now() + (intervals[p.level] * 60 * 1000);
        
        progress[currentCard.id] = p;
        localStorage.setItem('bio_prog', JSON.stringify(progress));

        // Refresh for next card
        document.getElementById('answer-area').style.display = 'none';
        document.getElementById('show-btn').style.display = 'block';
        getNextCard();
    }

    getNextCard();
</script>

</body>
</html>
